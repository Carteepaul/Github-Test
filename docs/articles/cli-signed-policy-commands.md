---
title: Signed Policy Management
description: Signed policy management commands.
author:
topic-type: Reference
date: 04/20/2023
---

# Signed policy management

This section provides commands to create signed attestation policies for Project Amber with or without using a key, certificate, and encryption algorithm.

## Create signed JWT attestation policies 

The following command creates a new signed policy with a key, certificate, and an encryption algorithm.

```bash
tenantctl create policy-jwt -f <rego policy file path> -p <signing key path> -c <cert path> -a <algorithm> -s 
```
### Sample call
```bash
tenantctl create policy-jwt -f sgxpolicy.txt -p policyjwt/amber-jwt.key -c policyjwt/amber-jwt.crt -a RS384 -s
```

### Sample response

```bash
Original policy:
default matches_sgx_policy = false 
matches_sgx_policy = true 
{  input.amber_tee_is_debuggable == false 
   input.amber_sgx_isvsvn == 0 
   input.amber_sgx_isvprodid == 0 
   input.amber_sgx_mrsigner ==  "d912a4f07ef83892a5915fb2ab584be31e186e5a4f95ab5f6950fd4eb8694d7b" 
   input.amber_sgx_mrenclave == "bab91f200038076ac25f87de0ca67472443c2ebe17ed9ba95314e609038f51ab" 
} Algorithm used during signing:  RS384
Policy token is stored in file  sgxpolicy.signed.20230321040145.txt
Policy token generated:
eyJhbGciOiJSUzM4NCIsIng1YyI6WyJNSUlFWlRDQ0FzMmdBd0lCQWdJVU1Mc3dDcVhnRGJvc0JFMnQwblROb3hSOVd3a3dEUVlKS29aSWh2Y05BUUVMQlFBd1FqRUxNQWtHQTFVRUJoTUNWVk14RlRBVEJnTlZCQWNNREVSbFptRjFiSFFnUTJsMGVURWNNQm9HQTFVRUNnd1RSR1ZtWVhWc2RDQkRiMjF3WVc1NUlFeDBaREFlRncweU16QXlNak14TURBMU1EZGFGdzB5TkRBeU1qTXhNREExTURkYU1FSXhDekFKQmdOVkJBWVRBbFZUTVJVd0V3WURWUVFIREF4RVpXWmhkV3gwSUVOcGRIa3hIREFhQmdOVkJBb01FMFJsWm1GMWJIUWdRMjl0Y0dGdWVTQk1kR1F3Z2dHaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQmp3QXdnZ0dLQW9JQmdRQ3hwYTlhT0pQYkFzSHF6a085WlltUXB0SlU0NCtCTUZPTzRmc2huanh4bWdsbnhEUWwwWFE3bmxFbmlHdnEvR09nK0lUMnJKMXg0VTVBUWQ3TWh0MkpHcEdlQTJKUnBkUTNBZlp5MytMYXRpeElLbExtY25VMFZGWVhZR3hPUmZ2RzBKNTd5YVF4UG93NEI3OEsrcEppNTliZURiM2h3ZW9DL2VvRStxY2RrOWlXakhkTC9uRDNGSWRiZnRDc2pLS3JXZFQ1U3dSOVl0c0F3TVdyanJCb0t1bW5vUFZONFRWdXFrcGNvOFVZejEydlY4TEc5Yk8waWRsd1RoY1BaWFp1RjR3bzJlNnQ5WkJzZkxNU0FOZ3FRZFNCNTU0RlVYT2t0RFp2NzVEVDQvOEhyNXhTcm1CZUZObDVnSWNMTFBud3VwdHV6SkdUOTh6a2hrUk4xWm0yVmgyUXdFek9OMWdIRHNaU3YraXVUZ2cvTkNQQWdoSGZRN3pSR3JNNG1uYTFVbG9TOTVIYSs2QkF6TnBYL2JxYzltd3ZDV05IN2FLdmF4cmQvQ013Nyt5QUFXclVac0ViM0ZFTjFzWlk0enRsZlVpdVhlSWgwQU1xM1M4LzUyTlJaWDBPSXdrV253NE1XWkVSajNCTWliSVlaTUZuOWZzdVk4Zm95Y1F4ajdrQ0F3RUFBYU5UTUZFd0hRWURWUjBPQkJZRUZDVjBEaEt1MG5rL1hMSElWWERUeUJhZEp2QzdNQjhHQTFVZEl3UVlNQmFBRkNWMERoS3UwbmsvWExISVZYRFR5QmFkSnZDN01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dHQkFIU28xbHQzWDg2bm4vaFJuU3BSNDMwSnZ6dTM5eVBZTjZ5aGhPYlBibjdyc2lYblg0MG5SVEo3L2NESHUxQjltWFBZOHFseU9XWTJhRFFkL3hGTllKUWh3T3c4VEE1RWtNb21BZ0xiRFgvQlZHdEZZcjhVak9YblRPcmNYU2djVUtWanFzTXJHRzAwNTlNODFJV3NVNzVJc1J3OFlnWkRGRXF3TmdOdTltUnNhRXNscDdBZy9adndESHhRMGFmYzI2UklhbmExYnE0dG1OUTVWdXZKV0pMZm1LQnUwS1NxUElnSzZPUGgyMFVWazEzblNOdm5JRGYzRTBkOHc1RDFDYVR3OEQwS1RDZU93NUZtZThTMFFpTnFEeGh5UVF0WU5VQUIzUzYrbFNuZ3liak5YNzY4MUMyMU1KRmdmTGhMejRxWDdQaEhKZVRBT0NBMm1KUDdLZnVBd2NScEVTbzNiSTliTUdpRHR0ellVOWp0NVp3OU11dDhaYkx5TTNtT3dXRjdkOUhRRmRZV1ZJZk5sVG9MakNPODNma1h1aG9hMUJKN0QrQWIybytMTGwyNmZxQ0l6N1A3dHFYcFdxR2lVNkdub1lmM0trR0xmNEs5SDE0R2N3SHRCTW4wVUczRmFxeTh5Mk1QQ0xsajVwTjhoczFWdVQxQlFaTlBSdUNZNlE9PSJdfQ.eyJBdHRlc3RhdGlvblBvbGljeSI6ImRlZmF1bHQgbWF0Y2hlc19zZ3hfcG9saWN5ID0gZmFsc2UgXG5tYXRjaGVzX3NneF9wb2xpY3kgPSB0cnVlIFxueyAgaW5wdXQuYW1iZXJfdGVlX2lzX2RlYnVnZ2FibGUgPT0gZmFsc2UgXG4gICBpbnB1dC5hbWJlcl9zZ3hfaXN2c3ZuID09IDAgXG4gICBpbnB1dC5hbWJlcl9zZ3hfaXN2cHJvZGlkID09IDAgXG4gICBpbnB1dC5hbWJlcl9zZ3hfbXJzaWduZXIgPT0gIFwiZDkxMmE0ZjA3ZWY4Mzg5MmE1OTE1ZmIyYWI1ODRiZTMxZTE4NmU1YTRmOTVhYjVmNjk1MGZkNGViODY5NGQ3YlwiIFxuICAgaW5wdXQuYW1iZXJfc2d4X21yZW5jbGF2ZSA9PSBcImJhYjkxZjIwMDAzODA3NmFjMjVmODdkZTBjYTY3NDcyNDQzYzJlYmUxN2VkOWJhOTUzMTRlNjA5MDM4ZjUxYWJcIiBcbn1cbiJ9.QCWU3gfYLngf12T5tXmqXzIOOR1RA46txAMkhRMJkOLG6M6O7RUKwepHTALVgnuMliFdQlo-FcYCotmjz18Gn4Lf_qYL638NnWeG8dBlbMlqnYWuQcCaIzxFIWElNzTeikDbqinXh8xMbKvaPSHMYr5APVaRWpeM1_g155UyRkuAT9AmyE45d15UVWdbF0JxVOel5GqKUye7pJt4fIOiDurhaKHY1x4vw_-96KHLFNVY1W-fI5h02YVwiFF4DPrsJbKs4qfo2x8EdVfj7It7ImK61vWbe08GCN7OHknW-K4eZa92RFAcdoY-QzeZoYBQSc7Hw4j-pmQLvPt7SzokSFryli-H6AHvtDqBgeCzLUmhwvRuTyRiMyl3LegHCdrtQBChPxvzBLmELQnGbkw4EuvR00kACR2IStWD26PVTjTc_vQRQzLzb-Y0T-N2b6wzOsE_7034CxaWz5VMA-EdEPZKqX1ZCE7LxnltwGhAV4NDF9W4z8h2Pwoy7_kx0gkw
```

## Create signed JWT attestation policies with the default algorithm

The following command creates a new signed policy with a key, certificate, and the default algorithm.

```bash
tenantctl create policy-jwt -f <rego policy file path> -p <signing key path> -c <cert path> -s 
```
### Sample call
```bash
tenantctl create policy-jwt -f sgxpolicy.txt -p policyjwt/amber-jwt.key -c policyjwt/amber-jwt.crt -s
```

### Sample response

```bash
Original policy:
default matches_sgx_policy = false 
matches_sgx_policy = true 
{  input.amber_tee_is_debuggable == false 
   input.amber_sgx_isvsvn == 0 
   input.amber_sgx_isvprodid == 0 
   input.amber_sgx_mrsigner ==  "d912a4f07ef83892a5915fb2ab584be31e186e5a4f95ab5f6950fd4eb8694d7b" 
   input.amber_sgx_mrenclave == "bab91f200038076ac25f87de0ca67472443c2ebe17ed9ba95314e609038f51ab" 
} Algorithm used during signing:  PS384
Policy token is stored in file  sgxpolicy.signed.20230321040159.txt
Policy token generated:
eyJhbGciOiJQUzM4NCIsIng1YyI6WyJNSUlFWlRDQ0FzMmdBd0lCQWdJVU1Mc3dDcVhnRGJvc0JFMnQwblROb3hSOVd3a3dEUVlKS29aSWh2Y05BUUVMQlFBd1FqRUxNQWtHQTFVRUJoTUNWVk14RlRBVEJnTlZCQWNNREVSbFptRjFiSFFnUTJsMGVURWNNQm9HQTFVRUNnd1RSR1ZtWVhWc2RDQkRiMjF3WVc1NUlFeDBaREFlRncweU16QXlNak14TURBMU1EZGFGdzB5TkRBeU1qTXhNREExTURkYU1FSXhDekFKQmdOVkJBWVRBbFZUTVJVd0V3WURWUVFIREF4RVpXWmhkV3gwSUVOcGRIa3hIREFhQmdOVkJBb01FMFJsWm1GMWJIUWdRMjl0Y0dGdWVTQk1kR1F3Z2dHaU1BMEdDU3FHU0liM0RRRUJBUVVBQTRJQmp3QXdnZ0dLQW9JQmdRQ3hwYTlhT0pQYkFzSHF6a085WlltUXB0SlU0NCtCTUZPTzRmc2huanh4bWdsbnhEUWwwWFE3bmxFbmlHdnEvR09nK0lUMnJKMXg0VTVBUWQ3TWh0MkpHcEdlQTJKUnBkUTNBZlp5MytMYXRpeElLbExtY25VMFZGWVhZR3hPUmZ2RzBKNTd5YVF4UG93NEI3OEsrcEppNTliZURiM2h3ZW9DL2VvRStxY2RrOWlXakhkTC9uRDNGSWRiZnRDc2pLS3JXZFQ1U3dSOVl0c0F3TVdyanJCb0t1bW5vUFZONFRWdXFrcGNvOFVZejEydlY4TEc5Yk8waWRsd1RoY1BaWFp1RjR3bzJlNnQ5WkJzZkxNU0FOZ3FRZFNCNTU0RlVYT2t0RFp2NzVEVDQvOEhyNXhTcm1CZUZObDVnSWNMTFBud3VwdHV6SkdUOTh6a2hrUk4xWm0yVmgyUXdFek9OMWdIRHNaU3YraXVUZ2cvTkNQQWdoSGZRN3pSR3JNNG1uYTFVbG9TOTVIYSs2QkF6TnBYL2JxYzltd3ZDV05IN2FLdmF4cmQvQ013Nyt5QUFXclVac0ViM0ZFTjFzWlk0enRsZlVpdVhlSWgwQU1xM1M4LzUyTlJaWDBPSXdrV253NE1XWkVSajNCTWliSVlaTUZuOWZzdVk4Zm95Y1F4ajdrQ0F3RUFBYU5UTUZFd0hRWURWUjBPQkJZRUZDVjBEaEt1MG5rL1hMSElWWERUeUJhZEp2QzdNQjhHQTFVZEl3UVlNQmFBRkNWMERoS3UwbmsvWExISVZYRFR5QmFkSnZDN01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dHQkFIU28xbHQzWDg2bm4vaFJuU3BSNDMwSnZ6dTM5eVBZTjZ5aGhPYlBibjdyc2lYblg0MG5SVEo3L2NESHUxQjltWFBZOHFseU9XWTJhRFFkL3hGTllKUWh3T3c4VEE1RWtNb21BZ0xiRFgvQlZHdEZZcjhVak9YblRPcmNYU2djVUtWanFzTXJHRzAwNTlNODFJV3NVNzVJc1J3OFlnWkRGRXF3TmdOdTltUnNhRXNscDdBZy9adndESHhRMGFmYzI2UklhbmExYnE0dG1OUTVWdXZKV0pMZm1LQnUwS1NxUElnSzZPUGgyMFVWazEzblNOdm5JRGYzRTBkOHc1RDFDYVR3OEQwS1RDZU93NUZtZThTMFFpTnFEeGh5UVF0WU5VQUIzUzYrbFNuZ3liak5YNzY4MUMyMU1KRmdmTGhMejRxWDdQaEhKZVRBT0NBMm1KUDdLZnVBd2NScEVTbzNiSTliTUdpRHR0ellVOWp0NVp3OU11dDhaYkx5TTNtT3dXRjdkOUhRRmRZV1ZJZk5sVG9MakNPODNma1h1aG9hMUJKN0QrQWIybytMTGwyNmZxQ0l6N1A3dHFYcFdxR2lVNkdub1lmM0trR0xmNEs5SDE0R2N3SHRCTW4wVUczRmFxeTh5Mk1QQ0xsajVwTjhoczFWdVQxQlFaTlBSdUNZNlE9PSJdfQ.eyJBdHRlc3RhdGlvblBvbGljeSI6ImRlZmF1bHQgbWF0Y2hlc19zZ3hfcG9saWN5ID0gZmFsc2UgXG5tYXRjaGVzX3NneF9wb2xpY3kgPSB0cnVlIFxueyAgaW5wdXQuYW1iZXJfdGVlX2lzX2RlYnVnZ2FibGUgPT0gZmFsc2UgXG4gICBpbnB1dC5hbWJlcl9zZ3hfaXN2c3ZuID09IDAgXG4gICBpbnB1dC5hbWJlcl9zZ3hfaXN2cHJvZGlkID09IDAgXG4gICBpbnB1dC5hbWJlcl9zZ3hfbXJzaWduZXIgPT0gIFwiZDkxMmE0ZjA3ZWY4Mzg5MmE1OTE1ZmIyYWI1ODRiZTMxZTE4NmU1YTRmOTVhYjVmNjk1MGZkNGViODY5NGQ3YlwiIFxuICAgaW5wdXQuYW1iZXJfc2d4X21yZW5jbGF2ZSA9PSBcImJhYjkxZjIwMDAzODA3NmFjMjVmODdkZTBjYTY3NDcyNDQzYzJlYmUxN2VkOWJhOTUzMTRlNjA5MDM4ZjUxYWJcIiBcbn1cbiJ9.e9UOcsHNY53dzSQSI5OBXHsv45NRVQ7vo7_fI6-hxymnxHbwAshNWGJiirt00uHiwQeVRlXAZL4s1dUGRjtr0JnU7537AiIJ2bDRtDbNkLiu-MQCEHFHA4LDQnEu-oXwU3pHa_vwZGk5jQW_ZaXRAvfzRoBuSiCSlUtpSYPs7VsMHa086eo_0ljXr0DjMF1h7rTkwtFuQ-r9IZzVEL5nvMIYL_F65CAfiFPjLz8Rsz31eyfoRQ4gh7bYs9Gy-VWy9NJhVmBnZYHTcIEPDVc3ajdtmie1U9swOVvrrAbvsATZtmq0wMQfgv-N62C1AMnP2pK0JKgqzmuD2gYNI6UKW8oTykNLeQ4_oeItUx4dPLe336XVNboGAoP9_PDzX_-s15H75cPaQJUy8THstNg6S5wWP9qM9PcI5oUHb3aQbHAqia9UhMlK3QNHV_aiX6h8E33zh9oze_B5aeS70QFG1s7luXg7lc6XbQGEW_OlarvO-jG2n5IdylCdW7PT0kJ-
```

## Create unsigned JWT attestation policies 

The following command creates a new unsigned policy without a key, certificate, or any encryption algorithm.

```bash
tenantctl create policy-jwt -f <rego policy file path> 
```
### Sample call
```bash
tenantctl create policy-jwt -f sgxpolicy.txt
```

### Sample response

```bash
Original policy:
default matches_sgx_policy = false 
matches_sgx_policy = true 
{  input.amber_tee_is_debuggable == false 
   input.amber_sgx_isvsvn == 0 
   input.amber_sgx_isvprodid == 0 
   input.amber_sgx_mrsigner ==  "d912a4f07ef83892a5915fb2ab584be31e186e5a4f95ab5f6950fd4eb8694d7b" 
   input.amber_sgx_mrenclave == "bab91f200038076ac25f87de0ca67472443c2ebe17ed9ba95314e609038f51ab" 
} Algorithm used during signing:  None
Policy token is stored in file  sgxpolicy.signed.20230321040138.txt
Policy token generated:
eyJhbGciOiJub25lIn0.eyJBdHRlc3RhdGlvblBvbGljeSI6ImRlZmF1bHQgbWF0Y2hlc19zZ3hfcG9saWN5ID0gZmFsc2UgXG5tYXRjaGVzX3NneF9wb2xpY3kgPSB0cnVlIFxueyAgaW5wdXQuYW1iZXJfdGVlX2lzX2RlYnVnZ2FibGUgPT0gZmFsc2UgXG4gICBpbnB1dC5hbWJlcl9zZ3hfaXN2c3ZuID09IDAgXG4gICBpbnB1dC5hbWJlcl9zZ3hfaXN2cHJvZGlkID09IDAgXG4gICBpbnB1dC5hbWJlcl9zZ3hfbXJzaWduZXIgPT0gIFwiZDkxMmE0ZjA3ZWY4Mzg5MmE1OTE1ZmIyYWI1ODRiZTMxZTE4NmU1YTRmOTVhYjVmNjk1MGZkNGViODY5NGQ3YlwiIFxuICAgaW5wdXQuYW1iZXJfc2d4X21yZW5jbGF2ZSA9PSBcImJhYjkxZjIwMDAzODA3NmFjMjVmODdkZTBjYTY3NDcyNDQzYzJlYmUxN2VkOWJhOTUzMTRlNjA5MDM4ZjUxYWJcIiBcbn1cbiJ9.
```